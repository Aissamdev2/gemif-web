import { SUBJECTS_PLAIN } from "./subjects";

export const MONTH_DAYS = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
export const MONTHS = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
export const DAYS = ['Lunes', 'Martes', 'Miercoles', 'Jueves', 'Viernes', 'Sabado', 'Domingo'];
export const DAYS_SHORT = ['Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb', 'Dom'];
export const EVENT_COLORS = ['bg-[#93fa9a]', 'bg-[#ff8a90]', 'bg-[#8c98ff]', 'bg-[#fd99ff]']
export const EVENT_BORDER_COLORS = ['border-[#05a10f]', 'border-[#e6000c]', 'border-[#0017db]', 'border-[#bc00bf]']
export const SUBJECTS_COLORS_11: Record<string, string> = {
  'Álgebra Lineal': '#ff0000',
  'Análisis Matemático I': '#4f46e5',
  'Física I': '#059669',
  'Programación Científica': '#374151',
};

export const SUBJECTS_BORDER_COLORS_11: Record<string, string> = {
  'Álgebra Lineal': '#f87171',
  'Análisis Matemático I': '#818cf8',
  'Física I': '#34d399',
  'Programación Científica': '#9ca3af',
};

export const SUBJECTS_BG_COLORS_11: Record<string, string> = {
  'Álgebra Lineal': '#fef2f2',
  'Análisis Matemático I': '#eef2ff',
  'Física I': '#ecfdf5',
  'Programación Científica': '#f3f4f6',
};

export const SUBJECTS_COLORS_12: Record<string, string> = {
  'Análisis Matemático II': '#4f46e5',
  'Ecuaciones Diferenciales I': '#d946ef',
  'Física II': '#059669',
  'Geometría': '#ff0000',
};

export const SUBJECTS_BORDER_COLORS_12: Record<string, string> = {
  'Análisis Matemático II': '#818cf8',
  'Ecuaciones Diferenciales I': '#e879f9',
  'Física II': '#34d399',
  'Geometría': '#f87171',
};

export const SUBJECTS_BG_COLORS_12: Record<string, string> = {
  'Análisis Matemático II': '#eef2ff',
  'Ecuaciones Diferenciales I': '#fdf4ff',
  'Física II': '#ecfdf5',
  'Geometría': '#fef2f2',
};

export const SUBJECTS_COLORS_21: Record<string, string> = {
  'Combinatoria y Probabilidad': '#1d2ba8',
  'Computación algebraica': '#05850e',
  'Ecuaciones Diferenciales II': '#961299',
  'Electromagnetismo': '#7d7a04',
  'Mecánica Clásica': '#910f2d',
};

export const SUBJECTS_BORDER_COLORS_21: Record<string, string> = {
  'Combinatoria y Probabilidad': '#1525ad',
  'Computación algebraica': '#34c73e',
  'Ecuaciones Diferenciales II': '#c131c4',
  'Electromagnetismo': '#d6d32f',
  'Mecánica Clásica': '#c72c50',
};

export const SUBJECTS_BG_COLORS_21: Record<string, string> = {
  'Combinatoria y Probabilidad': '#cacffc',
  'Computación algebraica': '#ccffcf',
  'Ecuaciones Diferenciales II': '#fbc7fc',
  'Electromagnetismo': '#fcfcc7',
  'Mecánica Clásica': '#fccad6',
};

export const SUBJECTS_COLORS_22: Record<string, string> = {
  'Estadística': '#1d2ba8',
  'Física Cuántica': '#05850e',
  'Métodos Numéricos': '#961299',
  'Teoría de Grafos': '#7d7a04',
  'Termodinámica': '#910f2d',
};

export const SUBJECTS_BORDER_COLORS_22: Record<string, string> = {
  'Estadística': '#1525ad',
  'Física Cuántica': '#34c73e',
  'Métodos Numéricos': '#c131c4',
  'Teoría de Grafos': '#d6d32f',
  'Termodinámica': '#c72c50',
};

export const SUBJECTS_BG_COLORS_22: Record<string, string> = {
  'Estadística': '#cacffc',
  'Física Cuántica': '#ccffcf',
  'Métodos Numéricos': '#fbc7fc',
  'Teoría de Grafos': '#fcfcc7',
  'Termodinámica': '#fccad6',
};

export const SUBJECTS_COLORS_31: Record<string, string> = {
  'Análisis Complejo': '#05850e',
  'Biofísica': '#910f2d',
  'Física de Fluidos': '#7d7a04',
  'Física del Estado Sólido y Superfícies': '#961299',
  'Mecánica Estatística': '#1d2ba8',
};

export const SUBJECTS_BORDER_COLORS_31: Record<string, string> = {
  'Análisis Complejo': '#34c73e',
  'Biofísica': '#c72c50',
  'Física de Fluidos': '#d6d32f',
  'Física del Estado Sólido y Superfícies': '#c131c4',
  'Mecánica Estatística': '#1525ad',
};

export const SUBJECTS_BG_COLORS_31: Record<string, string> = {
  'Análisis Complejo': '#ccffcf',
  'Biofísica': '#fccad6',
  'Física de Fluidos': '#fcfcc7',
  'Física del Estado Sólido y Superfícies': '#fbc7fc',
  'Mecánica Estatística': '#cacffc',
};

export const SUBJECTS_COLORS_32: Record<string, string> = {
  'Electrónica Física': '#05850e',
  'Estructuras Algebraicas': '#7d7a04',
  'Geometría Diferencial y Aplicaciones': '#1d2ba8',
  'Sistemas Dinámicos': '#961299',
};

export const SUBJECTS_BORDER_COLORS_32: Record<string, string> = {
  'Electrónica Física': '#34c73e',
  'Estructuras Algebraicas': '#d6d32f',
  'Geometría Diferencial y Aplicaciones': '#1525ad',
  'Sistemas Dinámicos': '#c131c4',
};

export const SUBJECTS_BG_COLORS_32: Record<string, string> = {
  'Electrónica Física': '#ccffcf',
  'Estructuras Algebraicas': '#fcfcc7',
  'Geometría Diferencial y Aplicaciones': '#cacffc',
  'Sistemas Dinámicos': '#fbc7fc',
};

export const SUBJECTS_COLORS_41: Record<string, string> = {
  'Electrónica Aplicada': '#05850e',
  'Óptica y Fotónica': '#7d7a04',
  'Proyectos de Ingeniería': '#1d2ba8',
};

export const SUBJECTS_BORDER_COLORS_41: Record<string, string> = {
  'Electrónica Aplicada': '#34c73e',
  'Óptica y Fotónica': '#d6d32f',
  'Proyectos de Ingeniería': '#1525ad',
};

export const SUBJECTS_BG_COLORS_41: Record<string, string> = {
  'Electrónica Aplicada': '#ccffcf',
  'Óptica y Fotónica': '#fcfcc7',
  'Proyectos de Ingeniería': '#cacffc',
};

export const SUBJECTS_COLORS_42: Record<string, string> = {
  'Trabajo de Fin de Grado': '#05850e',
};

export const SUBJECTS_BORDER_COLORS_42: Record<string, string> = {
  'Trabajo de Fin de Grado': '#34c73e',
};

export const SUBJECTS_BG_COLORS_42: Record<string, string> = {
  'Trabajo de Fin de Grado': '#ccffcf',
};


const SUBJECTS_OBJ = [
  // Year 1, Quadri 1
  { name: 'Álgebra Lineal', color: '#ff0000', bgcolor: '#fef2f2', bordercolor: '#f87171', year: '1', quadri: '1' },
  { name: 'Análisis Matemático I', color: '#4f46e5', bgcolor: '#eef2ff', bordercolor: '#818cf8', year: '1', quadri: '1' },
  { name: 'Física I', color: '#059669', bgcolor: '#ecfdf5', bordercolor: '#34d399', year: '1', quadri: '1' },
  { name: 'Programación Científica', color: '#374151', bgcolor: '#f3f4f6', bordercolor: '#9ca3af', year: '1', quadri: '1' },
  // Year 1, Quadri 2
  { name: 'Análisis Matemático II', color: '#4f46e5', bgcolor: '#eef2ff', bordercolor: '#818cf8', year: '1', quadri: '2' },
  { name: 'Ecuaciones Diferenciales I', color: '#d946ef', bgcolor: '#fdf4ff', bordercolor: '#e879f9', year: '1', quadri: '2' },
  { name: 'Física II', color: '#059669', bgcolor: '#ecfdf5', bordercolor: '#34d399', year: '1', quadri: '2' },
  { name: 'Geometría', color: '#ff0000', bgcolor: '#fef2f2', bordercolor: '#f87171', year: '1', quadri: '2' },
  // Year 2, Quadri 1
  { name: 'Combinatoria y Probabilidad', color: '#1d2ba8', bgcolor: '#cacffc', bordercolor: '#1525ad', year: '2', quadri: '1' },
  { name: 'Computación algebraica', color: '#05850e', bgcolor: '#ccffcf', bordercolor: '#34c73e', year: '2', quadri: '1' },
  { name: 'Ecuaciones Diferenciales II', color: '#961299', bgcolor: '#fbc7fc', bordercolor: '#c131c4', year: '2', quadri: '1' },
  { name: 'Electromagnetismo', color: '#7d7a04', bgcolor: '#fcfcc7', bordercolor: '#d6d32f', year: '2', quadri: '1' },
  { name: 'Mecánica Clásica', color: '#910f2d', bgcolor: '#fccad6', bordercolor: '#c72c50', year: '2', quadri: '1' },
  // Year 2, Quadri 2
  { name: 'Estadística', color: '#1d2ba8', bgcolor: '#cacffc', bordercolor: '#1525ad', year: '2', quadri: '2' },
  { name: 'Física Cuántica', color: '#05850e', bgcolor: '#ccffcf', bordercolor: '#34c73e', year: '2', quadri: '2' },
  { name: 'Métodos Numéricos', color: '#961299', bgcolor: '#fbc7fc', bordercolor: '#c131c4', year: '2', quadri: '2' },
  { name: 'Teoría de Grafos', color: '#7d7a04', bgcolor: '#fcfcc7', bordercolor: '#d6d32f', year: '2', quadri: '2' },
  { name: 'Termodinámica', color: '#910f2d', bgcolor: '#fccad6', bordercolor: '#c72c50', year: '2', quadri: '2' },
  // Year 3, Quadri 1
  { name: 'Análisis Complejo', color: '#05850e', bgcolor: '#ccffcf', bordercolor: '#34c73e', year: '3', quadri: '1' },
  { name: 'Biofísica', color: '#910f2d', bgcolor: '#fccad6', bordercolor: '#c72c50', year: '3', quadri: '1' },
  { name: 'Física de Fluidos', color: '#7d7a04', bgcolor: '#fcfcc7', bordercolor: '#d6d32f', year: '3', quadri: '1' },
  { name: 'Física del Estado Sólido y Superfícies', color: '#961299', bgcolor: '#fbc7fc', bordercolor: '#c131c4', year: '3', quadri: '1' },
  { name: 'Mecánica Estatística', color: '#1d2ba8', bgcolor: '#cacffc', bordercolor: '#1525ad', year: '3', quadri: '1' },
  // Year 3, Quadri 2
  { name: 'Electrónica Física', color: '#05850e', bgcolor: '#ccffcf', bordercolor: '#34c73e', year: '3', quadri: '2' },
  { name: 'Estructuras Algebraicas', color: '#7d7a04', bgcolor: '#fcfcc7', bordercolor: '#d6d32f', year: '3', quadri: '2' },
  { name: 'Geometría Diferencial y Aplicaciones', color: '#1d2ba8', bgcolor: '#cacffc', bordercolor: '#1525ad', year: '3', quadri: '2' },
  { name: 'Sistemas Dinámicos', color: '#961299', bgcolor: '#fbc7fc', bordercolor: '#c131c4', year: '3', quadri: '2' },
  // Year 4, Quadri 1
  { name: 'Electrónica Aplicada', color: '#05850e', bgcolor: '#ccffcf', bordercolor: '#34c73e', year: '4', quadri: '1' },
  { name: 'Óptica y Fotónica', color: '#7d7a04', bgcolor: '#fcfcc7', bordercolor: '#d6d32f', year: '4', quadri: '1' },
  { name: 'Proyectos de Ingeniería', color: '#1d2ba8', bgcolor: '#cacffc', bordercolor: '#1525ad', year: '4', quadri: '1' },
  // Year 4, Quadri 2
  { name: 'Trabajo de Fin de Grado', color: '#05850e', bgcolor: '#ccffcf', bordercolor: '#34c73e', year: '4', quadri: '2' },
];




export const SUBJECTS_COLORS_OBJ: Record<string, string> = {
  "Otros": "#000000",
  ...SUBJECTS_COLORS_11,
  ...SUBJECTS_COLORS_12,
  ...SUBJECTS_COLORS_21,
  ...SUBJECTS_COLORS_22,
  ...SUBJECTS_COLORS_31,
  ...SUBJECTS_COLORS_32,
  ...SUBJECTS_COLORS_41,
  ...SUBJECTS_COLORS_42
}
export const SUBJECTS_BORDER_COLORS_OBJ: Record<string, string> = {
  "Otros": "#000000",
  ...SUBJECTS_BORDER_COLORS_11,
  ...SUBJECTS_BORDER_COLORS_12,
  ...SUBJECTS_BORDER_COLORS_21,
  ...SUBJECTS_BORDER_COLORS_22,
  ...SUBJECTS_BORDER_COLORS_31,
  ...SUBJECTS_BORDER_COLORS_32,
  ...SUBJECTS_BORDER_COLORS_41,
  ...SUBJECTS_BORDER_COLORS_42
}
export const SUBJECTS_BG_COLORS_OBJ: Record<string, string> = {
  "Otros": "#ffffff",
  ...SUBJECTS_BG_COLORS_11,
  ...SUBJECTS_BG_COLORS_12,
  ...SUBJECTS_BG_COLORS_21,
  ...SUBJECTS_BG_COLORS_22,
  ...SUBJECTS_BG_COLORS_31,
  ...SUBJECTS_BG_COLORS_32,
  ...SUBJECTS_BG_COLORS_41,
  ...SUBJECTS_BG_COLORS_42
}


export const SUBJECTS_BG_COLORS = Object.values(SUBJECTS_BG_COLORS_OBJ)
export const SUBJECTS_COLORS = Object.values(SUBJECTS_COLORS_OBJ)
export const SUBJECTS_BORDER_COLORS = Object.values(SUBJECTS_BORDER_COLORS_OBJ)

export const SUBJECTS_BG_COLORS_WITHOUT_OTHERS = SUBJECTS_BG_COLORS.slice(1)
export const SUBJECTS_COLORS_WITHOUT_OTHERS = SUBJECTS_COLORS.slice(1)
export const SUBJECTS_BORDER_COLORS_WITHOUT_OTHERS = SUBJECTS_BORDER_COLORS.slice(1)


export const HEADER_OPTIONS = [
  {
    name: 'Inicio',
    href: 'main',
  },
  {
    name: 'Calendario',
    href: 'calendar',
  },
  {
    name: 'Asignaturas',
    href: 'subjects',
  },
  {
    name: 'Archivo',
    href: 'archive',
  }
]


export const SCOPES: Record<string, string> = {
  'user': 'individual',
  'admin': 'de clase',
  'dev': 'global'
}

export const ROLES: Record<string, string> = {
  'user': 'Usuario',
  'admin': 'Admin',
  'dev': 'Dev'
}

export const ARCHIVE_FOLDER_ORDER: Record<string, number> = {
  'Primer curso': 1,
  'Segundo curso': 2,
  'Tercer curso': 3,
  'Cuarto curso': 4,
  'Optativas': 5
}

export const SUBJECT_INFO = [
  {
    name: 'Nombre',
    key: 'name'
  },
  {
    name: 'Créditos',
    key: 'credits'
  },
  {
    name: 'Curso',
    key: 'year'
  },
  {
    name: 'Quadri',
    key: 'quadri'
  },
  {
    name: 'Profesores',
    key: 'professors'
  },
  {
    name: 'Emails',
    key: 'emails'
  }
]

export const TITLES: Record<string, string> = {
  'file': 'archivo',
  'link': 'enlace'
}



export function timeAgo(date: Date) {
  const now = new Date();
  const nowUtc = now.getTime();
  const dateUtc = date.getTime();

  const diffInSeconds = Math.floor((nowUtc - dateUtc) / 1000);

  const seconds = diffInSeconds % 60;
  const minutes = Math.floor(diffInSeconds / 60) % 60;
  const hours = Math.floor(diffInSeconds / 3600) % 24;
  const days = Math.floor(diffInSeconds / (3600 * 24));

  let result = '';
  
  if (days > 0) {
      result += `${days} día${days !== 1 ? 's' : ''}`;
  }
  if (hours > 0) {
      if (result) result += ' y ';
      result += `${hours} hora${hours !== 1 ? 's' : ''}`;
  }
  if (minutes > 0) {
      if (result) result += ' y ';
      result += `${minutes} minuto${minutes !== 1 ? 's' : ''}`;
  }
  if (seconds > 0 && !result) {
      result = `${seconds} segundo${seconds !== 1 ? 's' : ''}`;
  }
  
  return 'hace ' + result;
}



export function getSubjects(sbj: number[]): string[] {
  const subjects: string[] = [];
  for (let i = 0; i < sbj.length; i++) {
    subjects.push(SUBJECTS_PLAIN[sbj[i]]);
  }
  return subjects;
}


export function isLeapYear(year: number): boolean {
  return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);
}

export function getDaysInMonth(year: number, month: number): number {
  if (month === 2 && isLeapYear(year)) {
    return 29;
  }
  return MONTH_DAYS[month - 1];
}

type CalendarDate = {
  date: Date,
  isCurrentMonth?: boolean
  isToday?: boolean
}

export function getCalendarDates(year: number, month: number): CalendarDate[] {
  const dates: CalendarDate[] = [];
  const daysInCurrentMonth = getDaysInMonth(year, month);
  const today = new Date();

  // Calculate the first day of the month (0: Monday, 1: Tuesday, ..., 6: Sunday)
  let firstDayOfMonth = new Date(year, month - 1, 1).getDay();
  firstDayOfMonth = (firstDayOfMonth === 0) ? 6 : firstDayOfMonth - 1;

  // Determine the number of days in the previous month
  const previousMonth = month - 1 < 1 ? 12 : month - 1;
  const previousMonthYear = month - 1 < 1 ? year - 1 : year;
  const daysInPreviousMonth = getDaysInMonth(previousMonthYear, previousMonth);

  // Add days from the previous month to fill the calendar until the first day of the current month
  for (let i = firstDayOfMonth; i > 0; i--) {
    dates.push({
      date: new Date(previousMonthYear, previousMonth - 1, daysInPreviousMonth - i + 1),
      isCurrentMonth: false,
      isToday: compareDates(today, new Date(previousMonthYear, previousMonth - 1, daysInPreviousMonth - i + 1)),
    });
  }

  // Add all days of the current month
  for (let i = 1; i <= daysInCurrentMonth; i++) {
    dates.push({
      date: new Date(year, month - 1, i),
      isCurrentMonth: true,
      isToday: compareDates(today, new Date(year, month - 1, i)),
    });
  }

  // Calculate the total number of weeks to display (should be 6 to cover all cases)
  const totalWeeks = 6;
  const daysInCalendar = totalWeeks * 7;
  const daysToAdd = daysInCalendar - dates.length;

  // Add days from the next month to complete the weeks
  for (let i = 1; i <= daysToAdd; i++) {
    dates.push({
      date: new Date(year, month, i),
      isCurrentMonth: false,
      isToday: compareDates(today, new Date(year, month, i)),
    });
  }

  return dates;
}


export const compareDates = (a: Date, b: Date) => {
  const condition = a.getFullYear() === b.getFullYear() && a.getMonth() === b.getMonth() && a.getDate() === b.getDate();
  return condition;
};

export const dateToString = (date: string) => {
  const dateObj = new Date(date);
  const year = dateObj.getFullYear();
  const month = dateObj.getMonth();
  const monthDay = dateObj.getDate();
  const day = (dateObj.getDay() + 6) % 7;
  return `${DAYS_SHORT[day]}, ${monthDay} de ${MONTHS[month]} de ${year}`;
}